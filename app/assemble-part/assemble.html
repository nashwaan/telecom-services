<script type="text/ng-template" id="plan.html">
    
    <md-list layout="column" 
             layout-align="start start" 
             dnd-list="plan.Bands" 
             dnd-allowed-types="['band']" 
             dnd-horizontal-list="true">
        
        <md-toolbar layout="row" class="md-theme-light">

            <div class="fab-size" layout="row">
            <md-fab-speed-dial md-open="false" md-direction="right" class="md-scale">
                <md-fab-trigger>
                    
                    <md-button class="md-fab md-mini md-primary md-raised" style="box-shadow:none;transform:scale(1.3)" aria-label="Plan Options"> 
                        <md-icon md-svg-src="3dots"></md-icon>
                        <md-tooltip>Plan Options</md-tooltip>
                    </md-button>
                    
                </md-fab-trigger>
                
                <md-fab-actions>
                    
                    <md-button class="md-fab md-mini md-primary md-raised md-hue-1" ng-click="cntrl.addBand(plan)" aria-label="Add Band">
                        <md-icon md-svg-src="add" aria-label="Add Band"></md-icon>
                        <md-tooltip>Add Band</md-tooltip>
                    </md-button>
                    
                    <md-button class="md-fab md-mini md-primary md-raised md-hue-1" ng-click="cntrl.loadPlan()" aria-label="Load Plan">
                        <md-icon md-svg-src="download" aria-label="Load Plan"></md-icon>
                        <md-tooltip>Load Plan</md-tooltip>
                    </md-button>
                    
                    <md-button class="md-fab md-mini md-primary md-raised md-hue-1" ng-click="cntrl.savePlan()" aria-label="Save Plan">
                        <md-icon md-svg-src="save" aria-label="Save Plan"></md-icon>
                        <md-tooltip>Save Plan</md-tooltip>
                    </md-button>
                    
                    <md-button class="md-fab md-mini md-primary md-raised md-hue-1" ng-click="cntrl.newPlan()" aria-label="New Plan">
                        <md-icon md-svg-src="new" aria-label="New Plan"></md-icon>
                        <md-tooltip>New Plan</md-tooltip>
                    </md-button>
                    
                    <md-button class="md-fab md-mini md-primary md-raised md-hue-1" ng-click="designer.Plans.splice($index,1)" aria-label="Delete Plan">
                        <md-icon md-svg-src="delete" aria-label="Delete Plan"></md-icon>
                        <md-tooltip>Delete Plan</md-tooltip>
                    </md-button>
                    
                </md-fab-actions>
                
            </md-fab-speed-dial>
            </div>

            <div layout="column" flex ng-click="cntrl.activatePlan(plan);selected.item=plan;selected.type='plan'">

                <div class="md-headline">{{plan.name?plan.name:'Plan:'}}</div>
                <div class="md-subhead" ng-class="{'assemble-warn':!plan.Bands.length}">{{plan.Bands.length?"Total Bands: "+plan.Bands.length:"Add 'Band' to this plan."}}</div>

            </div>

        </md-toolbar>

        <div layout="row" layout-xs="column">
            
            <md-item class="band" 
                     ng-repeat="band in plan.Bands" 
                     dnd-draggable="band" 
                     dnd-type="'band'" 
                     dnd-effect-allowed="move" 
                     dnd-moved="'plan.Bands.splice($index,1)'" 
                     dnd-selected="selected.item=band;selected.type='band'" 
                     ng-click="cntrl.activateBand(band)" 
                     ng-class="{'selected':cntrl.bandActive===band}" 
                     ng-include="'band.html'">

            </md-item>

        </div>
        
    </md-list>
    
</script>



<script type="text/ng-template" id="band.html">
    
    <md-list layout="column" class="md-accent"
             layout-align="start start" 
             dnd-list="band.Components" 
             dnd-allowed-types="['component']" 
             dnd-horizontal-list="true">
        
        <div layout="row" layout-align="start center">
            
            <div class="fab-size-mini" layout="row">
            <md-fab-speed-dial md-open="false" md-direction="right" class="md-scale">
                <md-fab-trigger>
                    
                    <md-button class="md-fab md-mini md-raised" style="box-shadow:none;transform:scale(1.3)" aria-label="Band Options">
                        <md-icon md-svg-src="3dots"></md-icon>
                        <md-tooltip>Band Options</md-tooltip>
                    </md-button>
                    
                </md-fab-trigger>
                
                <md-fab-actions>
                    
                    <md-button class="md-fab md-mini md-raised" ng-click="cntrl.addComponent(band)" aria-label="Add Component">
                        <md-icon md-svg-src="add" aria-label="Add Component"></md-icon>
                        <md-tooltip>Add Compnent</md-tooltip>
                    </md-button>
                    
                    <md-button class="md-fab md-mini md-raised" ng-click="cntrl.bandStored=cntrl.copy(band);plan.Bands.splice($index,1)" aria-label="Cut Band">
                        <md-icon md-svg-src="cut" aria-label="Cut Band"></md-icon>
                        <md-tooltip>Cut Band</md-tooltip>
                    </md-button>
                    
                    <md-button class="md-fab md-mini md-raised" ng-click="cntrl.bandStored=cntrl.copy(band)" aria-label="Copy Band">
                        <md-icon md-svg-src="copy" aria-label="Copy Band"></md-icon>
                        <md-tooltip>Copy Band</md-tooltip>
                    </md-button>
                    
                    <md-button class="md-fab md-mini md-raised" ng-click="cntrl.componentStored?band.Components.push(cntrl.componentStored):0" aria-label="Paste Component">
                        <md-icon md-svg-src="paste" aria-label="Paste Component"></md-icon>
                        <md-tooltip>Paste Component</md-tooltip>
                    </md-button>
                    
                    <md-button class="md-fab md-mini md-raised" ng-click="plan.Bands.splice($index,1)" aria-label="Delete Band">
                        <md-icon md-svg-src="delete" aria-label="Delete Band"></md-icon>
                        <md-tooltip>Delete Band</md-tooltip>
                    </md-button>
                    
                </md-fab-actions>
                
            </md-fab-speed-dial>
            </div>

            <div layout="column">
                
                <div class="md-headline">{{band.name?band.name:'Band:'}}</div>
                <div class="md-caption" ng-class="{'assemble-warn':!band.Components.length}">{{band.Components.length?"Total Components: "+band.Components.length:"Add 'Component' to this band."}}</div>
                
            </div>
            
        </div>
        
        <div layout="row" layout-xs="column">
            
            <md-item class="component" 
                     ng-repeat="component in band.Components" 
                     dnd-draggable="component" 
                     dnd-type="'component'" 
                     dnd-effect-allowed="copy" 
                     dnd-moved="'band.Components.splice($index,1)'" 
                     dnd-selected="selected.item=component;selected.type='component'" 
                     ng-click="cntrl.activateComponent(component)" 
                     ng-class="{'selected':cntrl.componentActive===component}" 
                     ng-include="'component.html'">
                
            </md-item>
            
        </div>
        
    </md-list>
    
</script>



<script type="text/ng-template" id="component.html">
    
    <md-card layout="column" 
             layout-align="start start" 
             dnd-list="component.Features" 
             dnd-allowed-types="['feature','master']" 
             dnd-drop="cntrl.dropIntoComponent(event,index,item,external,type,['feature','master'])">
        
        <md-card-header layout="row" layout-align="start start">
            
            <div class="fab-size-mini" layout="row">
            <md-fab-speed-dial md-open="false" md-direction="right" class="md-scale">
                <md-fab-trigger>
                    
                    <md-button class="md-fab md-mini md-raised" style="background:#fff;box-shadow:none;transform:scale(1.3)" aria-label="Component Options">
                        <md-icon md-svg-src="3dots"></md-icon>
                        <md-tooltip>Component Options</md-tooltip>
                    </md-button>
                    
                </md-fab-trigger>
                
                <md-fab-actions>
                    
                     <md-button class="md-fab md-mini md-raised" ng-click="cntrl.componentStored=cntrl.copy(component);band.Components.splice($index,1)" aria-label="Cut Component">
                        <md-icon md-svg-src="cut" aria-label="Cut Component"></md-icon>
                        <md-tooltip>Cut Component</md-tooltip>
                    </md-button>
                    
                    <md-button class="md-fab md-mini md-raised" ng-click="cntrl.componentStored=cntrl.copy(component)" aria-label="Copy Component">
                        <md-icon md-svg-src="copy" aria-label="Copy Component"></md-icon>
                        <md-tooltip>Copy Component</md-tooltip>
                    </md-button>
                    
                    <md-button class="md-fab md-mini md-raised" ng-click="cntrl.featureStored?component.Features.push(cntrl.featureStored):0" aria-label="Paste Feature">
                        <md-icon md-svg-src="paste" aria-label="Paste Feature"></md-icon>
                        <md-tooltip>Paste Feature</md-tooltip>
                    </md-button>
                    
                   <md-button class="md-fab md-mini md-raised" ng-click="band.Components.splice($index,1)" aria-label="Delete Component">
                        <md-icon md-svg-src="delete" aria-label="Delete Component"></md-icon>
                        <md-tooltip>Delete Component</md-tooltip>
                    </md-button>
                    
                </md-fab-actions>
                
            </md-fab-speed-dial>
            </div>

            <md-card-header-text>
                
                <div class="md-subhead">{{component.name?component.name:'Component:'}}</div>
                <div class="md-caption" ng-class="{'assemble-warn':!component.Features.length}">{{component.Features.length?"Total Features: "+component.Features.length:"Add 'Feature' to this component."}}</div>
                
            </md-card-header-text>
            
        </md-card-header>
        
        <md-card-content class="feature" 
                         ng-repeat="feature in component.Features" 
                         dnd-draggable="feature" 
                         dnd-type="'feature'" 
                         dnd-effect-allowed="move" 
                         dnd-moved="'component.Features.splice($index,1)'" 
                         dnd-selected="selected.item=feature;selected.type='feature'" 
                         ng-click="cntrl.activateFeature(feature)" 
                         ng-class="{'selected':cntrl.featureActive===feature}" 
                         ng-include="'feature.html'">
            
        </md-card-content>
        
    </md-card>
    
</script>



<script type="text/ng-template" id="feature.html">
    
    <md-list layout="column" 
             layout-align="start start" 
             dnd-list="feature.Attributes" 
             dnd-allowed-types="['attribute']">
        
        <div aria-label="{{cntrl.getMasterName(feature)}}">
            
            <md-icon class="" 
                     md-svg-icon="{{cntrl.getMasterName(feature) | icon_provider}}" 
                     aria-label="{{cntrl.getMasterName(feature)}}">
            </md-icon>
            
            <span>{{cntrl.getMasterName(feature)}}</span>
            
        </div>
        
        <div layout="column">
            
            <md-item class="attribute" 
                     ng-repeat="attribute in feature.Attributes" 
                     dnd-draggable="attribute" 
                     dnd-type="'attribute'" 
                     dnd-effect-allowed="move" 
                     dnd-moved="'feature.Attributes.splice($index,1)'" 
                     dnd-selected="selected.item=attribute;selected.type='attribute'" 
                     ng-click="selected.item=attribute;selected.type='attribute'" 
                     ng-class="{'selected':selected.attribute===attribute}" 
                     ng-show="display.attributes" 
                     ng-include="'attribute.html'">
                
            </md-item>
            
            <md-divider ng-if="!$last"></md-divider>
            
        </div>
        
    </md-list>
    
</script>



<script type="text/ng-template" id="attribute.html">
    
    <md-list>
        
        <md-item class="sub-attribute" 
                 ng-repeat="(key,value) in attribute">
            
            {{key}} : {{value}}
            
        </md-item>
        
    </md-list>
    
</script>



<md-content flex ng-controller="assembleController as cntrl">
    
    <md-button ng-click="cntrl.showActions($event)" 
               aria-label="Show Actions" 
               style="position:absolute;top:-10px;right:10px;z-index:1000;" 
               md-no-ink>
        
        <md-tooltip>Actions</md-tooltip>
        <md-icon md-svg-icon="share"></md-icon>
        
    </md-button>
    
    <div class="assemble">
        
        <md-item class="plan" ng-repeat="plan in [cntrl.getPlan()]" ng-include="'plan.html'"></md-item>
        
    </div>
    
</md-content>