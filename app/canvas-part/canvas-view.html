<script type="text/ng-template" id="band.html">
    
    <md-list layout="column"
             layout-align="start start"
             dnd-list="band.Components" 
             dnd-allowed-types="['component']"
             dnd-horizontal-list="true">
        
        <div class="head">
            Band: {{band.BandName}} [Total Components: {{band.Components.length}}]
        </div>
        
        <div layout="row">
            
            <md-item class="component" 
                     ng-repeat="component in band.Components" 
                     dnd-draggable="component" 
                     dnd-type="'component'"
                     dnd-effect-allowed="copy" 
                     dnd-moved="'band.Components.splice($index,1)'" 
                     dnd-selected="selected.component=component" 
                     ng-class="{'selected':selected.component===component}" 
                     ng-include="'component.html'">
                
            </md-item>
            
            <!--<div class="clearfix"></div>-->
            
        </div>
        
    </md-list>
    
</script>



<script type="text/ng-template" id="component.html">
    
    <md-list layout="column"
             layout-align="start start"
             dnd-list="component.Properties" 
             dnd-allowed-types="['property','master']"
             dnd-drop="dropIntoComponent(event,index,item,external,type,'droppedType')">
        
        <div class="head">
            Component: {{component.ComponentName}} [Total Properties: {{component.Properties.length}}]
        </div>
        
        <div layout="column">
            
            <md-item class="property" 
                     ng-repeat="property in component.Properties" 
                     dnd-draggable="property" 
                     dnd-type="'property'"
                     dnd-effect-allowed="move" 
                     dnd-moved="'component.Properties.splice($index,1)'" 
                     dnd-selected="selected.property=property"
                     ng-class="{'selected':selected.property===property}" 
                     ng-include="'property.html'">
                
            </md-item>
            
            <!--<div class="clearfix"></div>-->
            
        </div>
        
    </md-list>
    
</script>



<script type="text/ng-template" id="property.html">
    
    <md-list layout="column"
             layout-align="start start"
             dnd-list="property.Attributes" 
             dnd-allowed-types="['attribute']">
        
        <div class="head">
            Property: {{property.PropertyName}} [Total Attributes: {{property.Attributes.length}}]
        </div>
        
        <div layout="column">
            
            <md-item class="attribute" 
                     ng-repeat="attribute in property.Attributes" 
                     dnd-draggable="attribute" 
                     dnd-type="'attribute'"
                     dnd-effect-allowed="move"
                     dnd-moved="'property.Attributes.splice($index,1)'" 
                     dnd-selected="selected.attribute=attribute" 
                     ng-class="{'selected':selected.attribute===attribute}" 
                     ng-include="'attribute.html'">
                
            </md-item>
            
            <md-divider ng-if="!$last"></md-divider>
            
            <!--<div class="clearfix"></div>-->
            
        </div>
        
    </md-list>
    
</script>



<script type="text/ng-template" id="attribute.html">
    
    <md-list>
        
        <md-item class="sub-attribute" 
                 ng-repeat="(key,value) in attribute">
            
            {{key}} : {{value}}
            
        </md-item>
        
    </md-list>
    
</script>



<md-content flex id="content" ng-controller="canvasController as cntrl">
    
    <md-button id="actions" ng-click="cntrl.showActions($event)" aria-label="Show Actions" style="position:absolute;top:10px;right:10px;z-index:1;" md-no-ink>
        
        <md-tooltip>Contact {{ 1 }}</md-tooltip>
        <md-icon md-svg-icon="share"></md-icon>
        
    </md-button>
    
    <div class="canvas">
        
        <md-list layout="column"
                 layout-align="start start"
                 dnd-list="plan.Bands" 
                 dnd-allowed-types="['band']">
            
            <div class="md-headline">
                Plan: {{plan.PlanName}} [Total Bands: {{plan.Bands.length}}]
            </div>
            
            <div layout="column">
                
                <md-item class="band" ng-repeat="band in plan.Bands" 
                         dnd-draggable="band" 
                         dnd-type="'band'"
                         dnd-effect-allowed="move" 
                         dnd-moved="'plan.Bands.splice($index,1)'" 
                         dnd-selected="selected.band=band" 
                         ng-class="{'selected':selected.band===band}"
                         ng-include="'band.html'">
                    
                </md-item>
                
                <!--<div class="clearfix"></div>-->
                
            </div>
            
        </md-list>
        
        <h2>Generated Model</h2>
        <pre>{{planAsJson}}</pre>
        
    </div>
    
</md-content>