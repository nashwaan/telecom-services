<script type="text/ng-template" id="user-settings.html">
    
    <md-dialog flex="66" aria-label="User Settings" ng-cloak>
        
        <form>
            
            <md-toolbar>
                <div class="md-toolbar-tools">
                    <h2>Settings</h2>
                    <span flex></span>
                    <md-button class="md-icon-button" ng-click="cancel()">
                        <md-icon md-svg-icon="gui:cancel" aria-label="Close Dialog"></md-icon>
                    </md-button>
                </div>
            </md-toolbar>
            
            <md-dialog-content>
                <div class="md-dialog-content">
                    <p>Specify your preference settings:</p>
                    <md-input-container class="md-block">
                        <label>Rows Per Page</label>
                        <md-tooltip>Number of rows to display per page</md-tooltip>
                        <input type="number" ng-model="rowsPerPage" step="50" min="50" max="1000" required />
                    </md-input-container>
                </div>
            </md-dialog-content>
            
            <md-dialog-actions layout="row">
                <md-button ng-click="ok({'rowsPerPage':rowsPerPage})">Ok</md-button>
            </md-dialog-actions>
            
        </form>
        
    </md-dialog>
    
</script>

<md-toolbar flex 
            layout="row" 
            layout-align="start center" 
            class="navigation md-hue-2" 
            ng-controller="navigationController as cntrl">
    
    <md-button class="menu" 
               ng-click="cntrl.toggleSidenav('plans')" 
               aria-label="Toggle Plans">
        
        <md-icon md-svg-icon="gui:crop_portrait"></md-icon>
        <md-tooltip>Plans panel</md-tooltip>
        
    </md-button>
    
    <md-button class="menu" 
               ng-click="cntrl.toggleSidenav('masters')" 
               aria-label="Toggle Masters">
        
        <md-icon md-svg-icon="gui:keyboard_arrow_right"></md-icon>
        <md-tooltip>Masters panel</md-tooltip>
        
    </md-button>
    
    <md-progress-circular md-mode="{{(cntrl.isBusy()?'indeterminate':'')}}" ng-if="cntrl.isBusy()"></md-progress-circular>
    
    <div class="md-headline" style="font-family:'Segoe UI Light'" layout-align-gt-sm="center" ng-if="!cntrl.isBusy()">
        {{cntrl.getTitle()}}
    </div>
    
    <div flex></div>
    
    <md-menu ng-if="true||$mdMedia('gt-sm')">

        <md-button style="width:48px;height:48px" class="md-icon-button" ng-click="$mdOpenMenu($event)" aria-label="User Options">
            <md-icon style="width:30px;height:30px" md-svg-icon="gui:person" md-menu-origin></md-icon>
            <md-tooltip>{{cntrl.getUserName()}} [{{cntrl.getUserRole()}}]</md-tooltip>
        </md-button>

        <md-menu-content width="3">
            
            <md-menu-item>
                <md-button ng-click="cntrl.showSettings($event)" aria-label="Settings">
                    <md-icon md-svg-icon="gui:settings " aria-label="Settings"></md-icon>
                    <md-tooltip>My settings</md-tooltip>
                    Settings
                </md-button>
            </md-menu-item>

            <md-menu-divider></md-menu-divider>

            <md-menu-item>
                <md-button ng-click="cntrl.findCreatedPlans($event)" aria-label="Created Plans">
                    <md-icon md-svg-icon="gui:note_add" aria-label="Created Plans"></md-icon>
                    <md-tooltip>Find plans created by me</md-tooltip>
                    Created Plans
                </md-button>
            </md-menu-item>

            <md-menu-item>
                <md-button ng-click="cntrl.findEditedPlans($event)" aria-label="Edited Plans">
                    <md-icon md-svg-icon="gui:edit" aria-label="Edited Plans"></md-icon>
                    <md-tooltip>Find Plans edited by me</md-tooltip>
                    Edited Plans
                </md-button>
            </md-menu-item>

            <md-menu-item>
                <md-button ng-click="cntrl.logout($event)" aria-label="Paste Flavor">
                    <md-icon md-svg-icon="gui:logout" aria-label="Paste Flavor"></md-icon>
                    <md-tooltip>Logout from this session</md-tooltip>
                    Logout
                </md-button>
            </md-menu-item>
            
        </md-menu-content>

    </md-menu>

    <md-button ng-click="cntrl.changeMode()">
        
        <md-icon style="width:48px;height:48px" md-svg-icon="logo"></md-icon>
        <md-tooltip>Change Mode</md-tooltip>
        
    </md-button>
    
    <md-button class="menu" 
               ng-click="cntrl.toggleSidenav('properties')" 
               aria-label="Toggle Properties">
        
        <md-icon md-svg-icon="gui:keyboard_arrow_left"></md-icon>
        <md-tooltip>Properties panel</md-tooltip>
        
    </md-button>
    
</md-toolbar>