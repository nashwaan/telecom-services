<md-sidenav class="md-sidenav-left" 
            layout="column" 
            md-component-id="masters" 
            md-is-locked-open="$mdMedia('gt-sm')">
    
    <!--<md-toolbar class="md-theme-light">
        
        <div class="md-toolbar-tools md-headline">Masters</div>
        
    </md-toolbar>-->

    <div ng-controller="mastersController as cntrl">
        
        <md-tabs md-border-bottom 
                 md-dynamic-height>

            <md-tab label="{{group.Group}}" 
                    ng-repeat="group in panel.groups" 
                    ng-click="selected.item=group;selected.type='group'">

                <section ng-repeat="collection in group.Collections" 
                         ng-click="selected.item=collection;selected.type='collection'">
                    
                    <md-subheader class="collection">
                        {{collection.Collection}}
                    </md-subheader>
                    
                    <md-list class="masters" 
                             dnd-list="collection.Properties" 
                             dnd-allowed-types="['master']">

                        <md-item class="master md-button md-raised" 
                                 ng-repeat="master in collection.Properties" 
                                 ng-click="selected.item=master;selected.type='master'" 
                                 ng-class="{'selected':selected.item===master}" 
                                 dnd-draggable="master" 
                                 dnd-type="'master'" 
                                 dnd-effect-allowed="move" 
                                 dnd-selected="selected.item=master;selected.type='master'" 
                                 dnd-moved="collection.Properties.splice($index,1)" 
                                 aria-label="{{master.Property}}">

                            <md-icon class="master-icon" 
                                     md-svg-icon="{{master.Property | icon_provider}}" >
                            </md-icon>

                            <span>{{master.Property}}</span>

                        </md-item>

                        <md-item class="master dndPlaceholder md-button md-raised"
                                 aria-label="{{selected.item.Property}}">

                            <md-icon class="avatar" 
                                     md-svg-icon="{{selected.item.Property | icon_provider}}">
                            </md-icon>
                            
                            <span>{{selected.item.Property}}</span>

                        </md-item>

                    </md-list>
                    
                </section>
                
            </md-tab>

        </md-tabs>
        
    </div>
    
</md-sidenav>