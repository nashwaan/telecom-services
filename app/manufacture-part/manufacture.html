<md-content flex ng-controller="manufactureController as cntrl">

    <md-toolbar flex 
                layout="row" 
                layout-align="start center" 
                class="md-hue-2">
        
        <div style="font-family:'Segoe UI Light';font-size:150%" layout-align-gt-sm="center">
            Editing Master: <b>{{cntrl.getEditMaster().Name}}</b>
        </div>
        
        <span flex></span>
        
        <md-button ng-click="cntrl.saveMaster()" ng-disabled="cntrl.isMasterDirty()" aria-label="Save Master">
            
            <md-icon md-svg-icon="save"></md-icon>
            <md-tooltip>Save Master</md-tooltip>
            
        </md-button>
        
        <md-button ng-click="cntrl.newMaster()" aria-label="New Master">
            
            <md-icon md-svg-icon="brick"></md-icon>
            <md-tooltip>New Master</md-tooltip>
            
        </md-button>    
        
        <md-button ng-click="cntrl.addAttribute()" aria-label="Add Attribute">

            <ng-md-icon icon="playlist_add"></ng-md-icon>
            <md-tooltip>Add Attribute</md-tooltip>
            
        </md-button>
        
    </md-toolbar>
    
    <md-item class="master md-button md-raised" 
             layout="row" 
             layout-align="start center" 
             ng-show="true"
             ng-click="cntrl.selectMaster()">
        
        <md-icon class="master-icon" md-svg-icon="{{cntrl.getEditMaster().name | icon_provider}}"></md-icon>
        
        <span>{{cntrl.getEditMaster().name}}</span>
        
    </md-item>

    <md-list layout="column" 
             dnd-list="cntrl.getEditMaster().Attributes.properties" 
             dnd-allowed-types="['edit-attribute']">
        
        <md-item class="edit-attribute" 
                 layout="row" 
                 layout-align="start center" 
                 ng-click="cntrl.editAttribute(attribute)" 
                 ng-repeat="attribute in cntrl.getEditMaster().Attributes.properties"
                 dnd-draggable="attribute" 
                 dnd-type="'edit-attribute'" 
                 dnd-effect-allowed="move" 
                 dnd-selected="selected.item=master;selected.type='master'" 
                 dnd-moved="cntrl.getEditMaster().Attributes.properties.splice($index,1)">
            
            <div flex="40" ng-repeat="property in [attribute]" ng-include="'property-'+property.type+'.html'"></div>

            <span flex="5"></span>
            
            <!--<div layout="column">
            
                <md-button ng-click="cntrl.moveAttributeUp(attribute)" aria-label="Move Attribute Up">

                    <md-icon md-svg-icon="up"></md-icon>
                    <md-tooltip>Move Attribute Up</md-tooltip>

                </md-button>

                <md-button ng-click="cntrl.moveAttributeDown(attribute)" aria-label="Move Attribute Down">

                    <md-icon md-svg-icon="down"></md-icon>
                    <md-tooltip>Move Attribute Down</md-tooltip>

                </md-button>

            </div>-->
            
            <md-button ng-click="cntrl.deleteAttribute(attribute)" aria-label="Delete Attribute">
            
                <md-icon md-svg-icon="delete"></md-icon>
                <md-tooltip>Delete Attribute</md-tooltip>
                
            </md-button>

        </md-item>

    </md-list>
    
</md-content>